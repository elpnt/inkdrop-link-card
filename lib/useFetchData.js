"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useFetchData=useFetchData;var _react=require("react");function fetchImage(url1,dom){let image="";const ogImage=dom.querySelector("meta[property='og:image']");if(ogImage)image=ogImage.getAttribute("content").split("?")[0];const twitterImage=dom.querySelector("meta[name='twitter:image']");if(!image&&twitterImage){image=twitterImage.getAttribute("content").split("?")[0]}const isAbsoluteUrl=url=>url.indexOf("://")>0||url.indexOf("//")>0;if(image&&!isAbsoluteUrl(image)){const origin=new URL(url1).origin;if(url1[0]==="."){image=url1+"/"+image}else{image=origin+"/"+image}}return image}function fetchTitle(dom){let title="";const headTitle=dom.querySelector("title");if(headTitle)title=headTitle.text;const ogTitle=dom.querySelector("meta[property='og:title']");if(!title&&ogTitle)title=ogTitle.getAttribute("content");const twitterTitle=dom.querySelector("meta[name='twitter:title']");if(!title&&twitterTitle)title=twitterTitle.getAttribute("content");return title}function fetchDescription(dom){let description="";const metaDescription=dom.querySelector("meta[property='description']");if(metaDescription)description=metaDescription.getAttribute("content");const ogDescription=dom.querySelector("meta[property='og:description']");if(ogDescription)description=ogDescription.getAttribute("content");return description}function useFetchData(href){const[image,setImage]=(0,_react).useState("");const[title,setTitle]=(0,_react).useState("");const[description,setDescription]=(0,_react).useState("");(0,_react).useEffect(()=>{const timer=setTimeout(()=>{fetch(href).then(response=>response.text()).then(text=>{const dom=new DOMParser().parseFromString(text,"text/html");setImage(fetchImage(href,dom));setTitle(fetchTitle(dom));setDescription(fetchDescription(dom)||href)})},1000);return()=>clearTimeout(timer)},[href]);return{image,title,description}}