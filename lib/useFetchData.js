"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useFetchData=useFetchData;var _react=require("react");var _openGraphScraper=_interopRequireDefault(require("open-graph-scraper"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}const SLEEP_AFTER_FETCH=1000;function useFetchData(href){const[image,setImage]=(0,_react).useState("");const[title,setTitle]=(0,_react).useState("");const[description,setDescription]=(0,_react).useState("");(0,_react).useEffect(()=>{const timer=setTimeout(()=>{fetch(href).then(response=>response.text()).then(html=>(0,_openGraphScraper).default({html})).then(({result})=>{const{ogImage,ogTitle,ogDescription,twitterImage,twitterTitle,twitterDescription}=result;setTitle(ogTitle||twitterTitle);setDescription(ogDescription||twitterDescription);return ogImage?.url||twitterImage?.url}).then(rawImageUrl=>{const imageUrl=new URL(rawImageUrl,href).href;return fetch(imageUrl)}).then(({ok,url})=>{if(ok){setImage(url)}})},SLEEP_AFTER_FETCH);return()=>clearTimeout(timer)},[href]);return{image,title,description}}